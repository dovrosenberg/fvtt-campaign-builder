{{! 
   Requires "currentWorld" - uuid of the world folder
}}

{{! The overall directory sidebar }}
<section id="fwb-directory" class="{{data.cssClass}} tab flexcol journal-directory" data-tab="journal">
  <!-- Directory Header -->
  <header class="directory-header">
    <div class="header-actions action-buttons flexrow">
      <button id="fwb-temp" class="create-document create-entry"><i class="{{data.sidebarIcon}}"></i>Temp</button>
    </div>
    <div class="header-search flexrow">
      <a class="header-control toggle-search-mode" data-tooltip="{{localize searchTooltip}}"><i class="fas {{data.searchIcon}}"></i></a>
      <input type="search" name="search" value="" placeholder="{{localize 'SIDEBAR.Search' types=labelPlural}}" autocomplete="off" />
      <a class="header-control toggle-sort" data-tooltip="{{localize sortTooltip}}"><i class="fa-solid {{data.sortIcon}}"></i></a>
      <a class="header-control collapse-all" data-tooltip="{{localize 'FOLDER.Collapse'}}"><i class="fa-duotone fa-folder-tree"></i></a>
    </div>
  </header>

  {{! these are the worlds }}
  <ol class="fwb-world-list">
    {{#each data.tree}}
      <li class="fwb-world-item folder flexcol {{#unless (eq ../currentWorld folder.uuid)}}collapsed{{/unless}}"
        data-folder-id="{{folder.id}}" data-uuid={{folder.uuid}} data-folder-depth="{{depth}}">
        <header class="folder-header flexrow{{#if folder.color}} customcolor{{/if}}" {{#if folder.color}} style="background-color: {{folder.color}}" {{/if}}>
          <h3 class="noborder"><i class="fas fa-folder-open fa-fw"></i>{{folder.name}}</h3>
        </header>

        {{! These are the topic compendia }}
        <ol class="subdirectory" {{#if folder.color}} style="border-left-color: {{folder.color}};border-bottom-color: {{folder.color}}" {{/if}}>
          {{#each entries}}
            <li class="fwb-world-item entry document journalentry flexrow" data-entry-id="{{metadata.id}}">
              <h4 class="entry-name"><a>{{metadata.label}}</a></h4>
            </li>
          {{/each}}
        </ol>
      </li>
    {{/each~}}
  </ol>

  <!-- Directory Footer -->
  <footer class="directory-footer action-buttons {{#if data.unavailable}}warning{{/if}}">
    {{~#if data.unavailable}}
      <i class="fa-solid fa-triangle-exclamation"></i>
      <a class="show-issues">{{localize "SUPPORT.UnavailableDocuments" count=data.unavailable document=data.label}}</a>
    {{/if~}}
  </footer>
</section>